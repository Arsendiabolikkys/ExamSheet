@model IndexPageViewModel
@{
    ViewData["Title"] = "Home Page";
}

<div class="header">
    <h1>Відомості</h1>
</div>

<div class="card-container container">
    @if (User.IsInRole(ExamSheet.Business.Account.AccountType.Deanery))
    {
        <div class="card card-new">
            <div class="card-body">
                <h5 class="card-title">Нова відомість</h5>
            </div>
            <div class="card-footer">
                <a href="@Url.Action("CreateExamSheet", "ExamSheet")" class="btn-lg btn-new">
                    <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                </a>
            </div>
        </div>
    }
    
    @if (Model.ExamSheets != null && Model.ExamSheets.Any())
    {
        foreach (var sheet in Model.ExamSheets)
        {
            var group = sheet.Group == null ? string.Empty : sheet.Group.Name;
            var faculty = sheet.Faculty == null ? string.Empty : sheet.Faculty.Name;
            var subject = sheet.Subject == null ? string.Empty : sheet.Subject.Name;
            var teacher = sheet.Teacher == null ? string.Empty : string.Format("{0} {1}", sheet.Teacher.Surname, sheet.Teacher.Name);
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Відомість</h5>
                    <ul class="list-group">
                        <li class="list-group-item list-group-item-success">@teacher</li>
                        <li class="list-group-item list-group-item-success">@subject</li>
                        <li class="list-group-item list-group-item-success">@group</li>
                        <li class="list-group-item list-group-item-success">@faculty</li>
                        <li class="list-group-item list-group-item-success">@sheet.Semester семестр @sheet.Year рік</li>
                    </ul>

                </div>
                <div class="card-footer">
                    @if (User.IsInRole(ExamSheet.Business.Account.AccountType.Deanery))
                    {
                        <a asp-action="Edit" asp-controller="ExamSheet" asp-route-id="@sheet.Id" class="btn">Редагувати</a>
                        @*<a asp-action="Download" asp-controller="ExamSheet" asp-route-id="@sheet.Id" class="btn download-word"><i class="fa fa-file-text-o"></i></a>*@
                        <a asp-action="Delete" asp-controller="ExamSheet" asp-route-id="@sheet.Id" class="btn btn-delete">Видалити</a>
                    }
                </div>
            </div>
        }
    }
    @Html.Partial("_PageModel", Model.Page)
</div>